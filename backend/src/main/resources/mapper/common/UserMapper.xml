<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="org.green.backend.repository.dao.common.UserDao">

    <select id="findById" resultType="org.green.backend.dto.common.UserDto">
        SELECT *
        FROM tbl_user
        WHERE id = #{id}
    </select>

    <select id="findByIdSecurity" resultType="org.green.backend.dto.common.SecurityUserDto">
        SELECT id,
               pw,
               name,
               use_yn,
               user_gbn_cd
        FROM tbl_user
        WHERE id = #{id}
        AND use_yn = 'Y'
    </select>

    <select id="checkId">
        SELECT COUNT(*)
        FROM tbl_user
        WHERE id = #{id}
    </select>

    <insert id="save">

        INSERT INTO tbl_user (
            id,
            pw,
            name,
            birth,
            gender_cd,
            zip_cd,
            addr,
            addr_detail,
            use_yn,
            user_gbn_cd
        ) VALUES (
            #{user.id},
            #{user.pw},
            #{user.name},
            #{user.birth},
            #{user.genderCd},
            #{user.zipCd},
            #{user.addr},
            #{user.addrDetail},
            #{user.useYn},
            #{user.userGbnCd}
        )

    </insert>

</mapper>